<div class="col-12 custom-breadcrumb bgblue inline-flex"> 
  <h6 class="strong">Add Logs</h6>
  </div>
  <div class="pcoded-wrapper">
    <div class="pcoded-content">
       <div class="pcoded-inner-content">
          <div class="main-body">
             <div class="page-wrapper">
                <div class="page-body">
                   <div class="row">
                    <div class="col-12">
                      <form [formGroup]="addnewlogform" class="form-tool" (ngSubmit)="onSubmit()">
                        <div class="col-12">
                          <div class="row">
                            <div>
                              <label>Date</label>
                              <input type="date" [(ngModel)]="log_date" class="form-control mt-1" formControlName="log_date" />
                              <div *ngIf="addnewlogform.get('log_date')?.invalid && addnewlogform.get('log_date')?.touched">
                                <small class="text-c-red" *ngIf="addnewlogform.get('log_date')?.errors?.['required']">Date is required.</small> 
                              </div> 
                            </div>
                          </div>
                        </div>
                        <div class="row mt-3">
                          <div class="col-12">
                            <div>
                              <label>Opening Balance (INR)</label>
                              <input type="number" [(ngModel)]="open_balance" class="form-control mt-1" formControlName="open_balance" />
                              <div *ngIf="addnewlogform.get('open_balance')?.invalid && addnewlogform.get('open_balance')?.touched">
                                <small class="text-c-red" *ngIf="addnewlogform.get('open_balance')?.errors?.['required']">Opening Balance is required.</small> 
                              </div>
                              </div> 
                          </div>
                        </div> 
                        <div class="row mt-3">
                          <div class="col-12">
                            <div class="accordion" id="accordion">
                              <div class="accordion-item">
                                <h2 class="accordion-header">
                                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="false" aria-controls="panelsStayOpen-collapseOne">
                                    Expenses
                                    <label class="exp_total ml-5 text-c-red">₹{{expense_total}}</label>
                                    <input type="hidden"  formControlName="expense_total"  [(ngModel)]="expense_total" value="{{expense_total}}"/>
                                  </button> 
                                </h2>
                                <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingOne">
                                  <div class="accordion-body">
                                    <div class="col-12">
                                      <div class="row">
                                        <div>
                                          <label>Particulars</label>
                                          <input type="hidden" [(ngModel)]="expid" value="{{expid}}" formControlName="expid"/>
                                          <input type="text" [(ngModel)]="particulars" class="form-control mt-1" formControlName="particulars" /> 
                                          <ul class="list-group" id="particularsList" style="display: none;">
                                            <li class="list-group-item plist">Milk</li>
                                            <li class="list-group-item plist">Stock</li>
                                          </ul> 
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-12 mt-3">
                                      <div class="row">
                                        <div>
                                          <label>description</label>
                                          <input type="text" class="form-control mt-1" formControlName="description" /> 
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-12 mt-3">
                                      <div class="row">
                                        <div>
                                          <label>Amount (INR)</label>
                                          <input type="number" [(ngModel)]="Amount" class="form-control mt-1" formControlName="Amount" /> 
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-12 mt-3">
                                      <div class="row">
                                        <div> 
                                         <label>Source of Cash</label>
                                         <select  [(ngModel)]="cashfrom" formControlName="cashfrom" class="form-select mt-1">
                                          <option value="Shop">Shop</option>
                                          <option value="Hand">Hand</option>
                                         </select>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-12">
                                      <div class="row">
                                        <div> 
                                          <input type="button" class="mt-4 m-b-0 btn btn-primary" (click)="addExpenseDetails()" value="Add"/>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-12">
                                      <div class="row">
                                        <table class="table table-success table-striped">
                                          <thead>
                                            <tr>
                                              <th scope="col">Action</th>
                                              <th scope="col">Particulars</th>
                                              <th scope="col">Source</th>
                                              <th scope="col">Amount</th>
                                            </tr>
                                          </thead>
                                          <tbody>
                                            <tr *ngFor="let record of ExpensejsonArray">
                                              <td> 
                                                <i class="fa fa-solid fa-edit" (click)="fneditExpense(record['ID'])"></i>
                                                <i class="ml-3 fa fa-solid fa-trash"></i>
                                              </td>
                                              <td>
                                                {{ record['item'] }}
                                              </td>
                                              <td>
                                                {{ record['source'] }}
                                              </td>
                                              <td>
                                                {{ record['amount'] }}
                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="accordion-item mt-3 mb-3">
                                <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                                    Income
                                    <label class="exp_total ml-5 text-c-green">₹{{income_total}}</label>
                                    <input type="hidden"  formControlName="income_total"  [(ngModel)]="income_total" value="{{income_total}}"/>
                                  </button>
                                </h2>
                                <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
                                  <div class="accordion-body">
                                    <div class="col-12">
                                      <div class="row">
                                        <div>
                                          <label>Cash In Shop (INR)</label>
                                          <input type="number" [(ngModel)]="cash_in_shop" (keyup)="FindIncomeSum()" class="form-control mt-1" formControlName="cash_in_shop" /> 
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-12 mt-3">
                                      <div class="row">
                                        <div>
                                          <label>Cash from Shop (INR)</label>
                                          <input type="number" (keyup)="FindIncomeSum()" [(ngModel)]="expense_total_fromshop" class="form-control mt-1" formControlName="cash_from_shop" /> 
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-12 mt-3">
                                      <div class="row">
                                        <div>
                                          <label>Cash In Gpay (INR)</label>
                                          <input type="number"  [(ngModel)]="cash_in_gpay" (keyup)="FindIncomeSum()" class="form-control mt-1" formControlName="cash_in_gpay" /> 
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div> 
                            </div>
                          </div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;"  [disabled]="addnewlogform.invalid">Submit</button>
                        <button class="btn btn-secondary mt-3" style="width: 100%;">Cancel</button>
                      </form>
                    </div> 
                    </div>
                   </div>
                </div>
             </div>
          </div>
       </div>
    </div> 
  